{"version":3,"file":"Util.js","sourceRoot":"","sources":["../src/Util.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { StorageType } from \"./Enums\";\r\nimport { \r\n    CoreUtils, EventHelper, _InternalMessageId, LoggingSeverity, IDiagnosticLogger, IPlugin, \r\n    getGlobal, getGlobalInst, getWindow, getDocument, getNavigator, getPerformance, getLocation, hasJSON, getJSON,\r\n    strPrototype\r\n} from \"@microsoft/applicationinsights-core-js\";\r\nimport { RequestHeaders } from \"./RequestResponseHeaders\";\r\nimport { DataSanitizer } from \"./Telemetry/Common/DataSanitizer\";\r\nimport { ICorrelationConfig } from \"./Interfaces/ICorrelationConfig\";\r\n\r\nlet _navigator = getNavigator();\r\nlet _isString = CoreUtils.isString;\r\nlet _uaDisallowsSameSiteNone:boolean = null;\r\n\r\nfunction _endsWith(value:string, search:string) {\r\n    let len = value.length;\r\n    let start = len - search.length;\r\n    return value.substring(start >= 0 ? start : 0, len) === search;\r\n}\r\n\r\nexport class Util {\r\n    private static document: any = getDocument()||{};\r\n    private static _canUseLocalStorage: boolean = undefined;\r\n    private static _canUseSessionStorage: boolean = undefined;\r\n    // listing only non-geo specific locations\r\n    private static _internalEndpoints: string[] = [\r\n        \"https://dc.services.visualstudio.com/v2/track\",\r\n        \"https://breeze.aimon.applicationinsights.io/v2/track\",\r\n        \"https://dc-int.services.visualstudio.com/v2/track\"\r\n    ];\r\n    public static NotSpecified = \"not_specified\";\r\n\r\n    public static createDomEvent(eventName: string): Event {\r\n        let event: Event = null;\r\n\r\n        if (CoreUtils.isFunction(Event)) { // Use Event constructor when available\r\n            event = new Event(eventName);\r\n        } else { // Event has no constructor in IE\r\n            let doc = getDocument();\r\n            if (doc && doc.createEvent) {\r\n                event = doc.createEvent(\"Event\");\r\n                event.initEvent(eventName, true, true);\r\n            }\r\n        }\r\n\r\n        return event;\r\n    }\r\n\r\n    /*\r\n     * Force the SDK not to use local and session storage\r\n    */\r\n    public static disableStorage() {\r\n        Util._canUseLocalStorage = false;\r\n        Util._canUseSessionStorage = false;\r\n    }\r\n\r\n    /**\r\n     * Gets the localStorage object if available\r\n     * @return {Storage} - Returns the storage object if available else returns null\r\n     */\r\n    private static _getLocalStorageObject(): Storage {\r\n        if (Util.canUseLocalStorage()) {\r\n            return Util._getVerifiedStorageObject(StorageType.LocalStorage);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Tests storage object (localStorage or sessionStorage) to verify that it is usable\r\n     * More details here: https://mathiasbynens.be/notes/localstorage-pattern\r\n     * @param storageType Type of storage\r\n     * @return {Storage} Returns storage object verified that it is usable\r\n     */\r\n    private static _getVerifiedStorageObject(storageType: StorageType): Storage {\r\n        let storage: Storage = null;\r\n        let fail: boolean;\r\n        let uid: Date;\r\n        try {\r\n            if (CoreUtils.isNullOrUndefined(getGlobal())) {\r\n                return null;\r\n            }\r\n            uid = new Date;\r\n            storage = storageType === StorageType.LocalStorage ? getGlobalInst(\"localStorage\") : getGlobalInst(\"sessionStorage\");\r\n            storage.setItem(uid.toString(), uid.toString());\r\n            fail = storage.getItem(uid.toString()) !== uid.toString();\r\n            storage.removeItem(uid.toString());\r\n            if (fail) {\r\n                storage = null;\r\n            }\r\n        } catch (exception) {\r\n            storage = null;\r\n        }\r\n\r\n        return storage;\r\n    }\r\n\r\n    /**\r\n     *  Checks if endpoint URL is application insights internal injestion service URL.\r\n     *\r\n     *  @param endpointUrl Endpoint URL to check.\r\n     *  @returns {boolean} True if if endpoint URL is application insights internal injestion service URL.\r\n     */\r\n    public static isInternalApplicationInsightsEndpoint(endpointUrl: string): boolean {\r\n        return Util._internalEndpoints.indexOf(endpointUrl.toLowerCase()) !== -1;\r\n    }\r\n\r\n    /**\r\n     *  Check if the browser supports local storage.\r\n     *\r\n     *  @returns {boolean} True if local storage is supported.\r\n     */\r\n    public static canUseLocalStorage(): boolean {\r\n        if (Util._canUseLocalStorage === undefined) {\r\n            Util._canUseLocalStorage = !!Util._getVerifiedStorageObject(StorageType.LocalStorage);\r\n        }\r\n\r\n        return Util._canUseLocalStorage;\r\n    }\r\n\r\n    /**\r\n     *  Get an object from the browser's local storage\r\n     *\r\n     *  @param {string} name - the name of the object to get from storage\r\n     *  @returns {string} The contents of the storage object with the given name. Null if storage is not supported.\r\n     */\r\n    public static getStorage(logger: IDiagnosticLogger, name: string): string {\r\n        const storage = Util._getLocalStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                return storage.getItem(name);\r\n            } catch (e) {\r\n                Util._canUseLocalStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserCannotReadLocalStorage,\r\n                    \"Browser failed read of local storage. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     *  Set the contents of an object in the browser's local storage\r\n     *\r\n     *  @param {string} name - the name of the object to set in storage\r\n     *  @param {string} data - the contents of the object to set in storage\r\n     *  @returns {boolean} True if the storage object could be written.\r\n     */\r\n    public static setStorage(logger: IDiagnosticLogger, name: string, data: string): boolean {\r\n        const storage = Util._getLocalStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                storage.setItem(name, data);\r\n                return true;\r\n            } catch (e) {\r\n                Util._canUseLocalStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserCannotWriteLocalStorage,\r\n                    \"Browser failed write to local storage. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     *  Remove an object from the browser's local storage\r\n     *\r\n     *  @param {string} name - the name of the object to remove from storage\r\n     *  @returns {boolean} True if the storage object could be removed.\r\n     */\r\n    public static removeStorage(logger: IDiagnosticLogger, name: string): boolean {\r\n        const storage = Util._getLocalStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                storage.removeItem(name);\r\n                return true;\r\n            } catch (e) {\r\n                Util._canUseLocalStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserFailedRemovalFromLocalStorage,\r\n                    \"Browser failed removal of local storage item. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Gets the sessionStorage object if available\r\n     * @return {Storage} - Returns the storage object if available else returns null\r\n     */\r\n    private static _getSessionStorageObject(): Storage {\r\n        if (Util.canUseSessionStorage()) {\r\n            return Util._getVerifiedStorageObject(StorageType.SessionStorage);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     *  Check if the browser supports session storage.\r\n     *\r\n     *  @returns {boolean} True if session storage is supported.\r\n     */\r\n    public static canUseSessionStorage(): boolean {\r\n        if (Util._canUseSessionStorage === undefined) {\r\n            Util._canUseSessionStorage = !!Util._getVerifiedStorageObject(StorageType.SessionStorage);\r\n        }\r\n\r\n        return Util._canUseSessionStorage;\r\n    }\r\n\r\n    /**\r\n     *  Gets the list of session storage keys\r\n     *\r\n     *  @returns {string[]} List of session storage keys\r\n     */\r\n    public static getSessionStorageKeys(): string[] {\r\n        const keys = [];\r\n\r\n        if (Util.canUseSessionStorage()) {\r\n            for (const key in getGlobalInst<any>(\"sessionStorage\")) {\r\n                keys.push(key);\r\n            }\r\n        }\r\n        return keys;\r\n    }\r\n\r\n    /**\r\n     *  Get an object from the browser's session storage\r\n     *\r\n     *  @param {string} name - the name of the object to get from storage\r\n     *  @returns {string} The contents of the storage object with the given name. Null if storage is not supported.\r\n     */\r\n    public static getSessionStorage(logger: IDiagnosticLogger, name: string): string {\r\n        const storage = Util._getSessionStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                return storage.getItem(name);\r\n            } catch (e) {\r\n                Util._canUseSessionStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserCannotReadSessionStorage,\r\n                    \"Browser failed read of session storage. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     *  Set the contents of an object in the browser's session storage\r\n     *\r\n     *  @param {string} name - the name of the object to set in storage\r\n     *  @param {string} data - the contents of the object to set in storage\r\n     *  @returns {boolean} True if the storage object could be written.\r\n     */\r\n    public static setSessionStorage(logger: IDiagnosticLogger, name: string, data: string): boolean {\r\n        const storage = Util._getSessionStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                storage.setItem(name, data);\r\n                return true;\r\n            } catch (e) {\r\n                Util._canUseSessionStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserCannotWriteSessionStorage,\r\n                    \"Browser failed write to session storage. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     *  Remove an object from the browser's session storage\r\n     *\r\n     *  @param {string} name - the name of the object to remove from storage\r\n     *  @returns {boolean} True if the storage object could be removed.\r\n     */\r\n    public static removeSessionStorage(logger: IDiagnosticLogger, name: string): boolean {\r\n        const storage = Util._getSessionStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                storage.removeItem(name);\r\n                return true;\r\n            } catch (e) {\r\n                Util._canUseSessionStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserFailedRemovalFromSessionStorage,\r\n                    \"Browser failed removal of session storage item. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /*\r\n     * Force the SDK not to store and read any data from cookies\r\n     */\r\n    public static disableCookies() {\r\n        CoreUtils.disableCookies();\r\n    }\r\n\r\n    /*\r\n     * helper method to tell if document.cookie object is available\r\n     */\r\n    public static canUseCookies(logger: IDiagnosticLogger): any {\r\n        if (CoreUtils._canUseCookies === undefined) {\r\n            CoreUtils._canUseCookies = false;\r\n\r\n            try {\r\n                CoreUtils._canUseCookies = Util.document.cookie !== undefined;\r\n            } catch (e) {\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.CannotAccessCookie,\r\n                    \"Cannot access document.cookie - \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            };\r\n        }\r\n\r\n        return CoreUtils._canUseCookies;\r\n    }\r\n\r\n    public static disallowsSameSiteNone(userAgent:string) {\r\n        if (!_isString(userAgent)) {\r\n            return false;\r\n        }\r\n    \r\n        // Cover all iOS based browsers here. This includes:\r\n        // - Safari on iOS 12 for iPhone, iPod Touch, iPad\r\n        // - WkWebview on iOS 12 for iPhone, iPod Touch, iPad\r\n        // - Chrome on iOS 12 for iPhone, iPod Touch, iPad\r\n        // All of which are broken by SameSite=None, because they use the iOS networking stack\r\n        if (userAgent.indexOf(\"CPU iPhone OS 12\") !== -1 || userAgent.indexOf(\"iPad; CPU OS 12\") !== -1) {\r\n            return true;\r\n        }\r\n     \r\n        // Cover Mac OS X based browsers that use the Mac OS networking stack. This includes:\r\n        // - Safari on Mac OS X\r\n        // This does not include:\r\n        // - Internal browser on Mac OS X\r\n        // - Chrome on Mac OS X\r\n        // - Chromium on Mac OS X\r\n        // Because they do not use the Mac OS networking stack.\r\n        if (userAgent.indexOf(\"Macintosh; Intel Mac OS X 10_14\") !== -1 && userAgent.indexOf(\"Version/\") !== -1 && userAgent.indexOf(\"Safari\") !== -1) {\r\n            return true;\r\n        }\r\n     \r\n        // Cover Mac OS X internal browsers that use the Mac OS networking stack. This includes:\r\n        // - Internal browser on Mac OS X\r\n        // This does not include:\r\n        // - Safari on Mac OS X\r\n        // - Chrome on Mac OS X\r\n        // - Chromium on Mac OS X\r\n        // Because they do not use the Mac OS networking stack.\r\n        if (userAgent.indexOf(\"Macintosh; Intel Mac OS X 10_14\") !== -1 && _endsWith(userAgent, \"AppleWebKit/605.1.15 (KHTML, like Gecko)\")) {\r\n            return true;\r\n        }\r\n     \r\n        // Cover Chrome 50-69, because some versions are broken by SameSite=None, and none in this range require it.\r\n        // Note: this covers some pre-Chromium Edge versions, but pre-Chromim Edge does not require SameSite=None, so this is fine.\r\n        // Note: this regex applies to Windows, Mac OS X, and Linux, deliberately.\r\n        if (userAgent.indexOf(\"Chrome/5\") !== -1 || userAgent.indexOf(\"Chrome/6\") !== -1) {\r\n            return true;\r\n        }\r\n     \r\n        // Unreal Engine runs Chromium 59, but does not advertise as Chrome until 4.23. Treat versions of Unreal\r\n        // that don't specify their Chrome version as lacking support for SameSite=None.\r\n        if (userAgent.indexOf(\"UnrealEngine\") !== -1 && userAgent.indexOf(\"Chrome\") === -1) {\r\n            return true;\r\n        }\r\n     \r\n        // UCBrowser < 12.13.2 ignores Set-Cookie headers with SameSite=None\r\n        // NB: this rule isn't complete - you need regex to make a complete rule.\r\n        // See: https://www.chromium.org/updates/same-site/incompatible-clients\r\n        if (userAgent.indexOf(\"UCBrowser/12\") !== -1 || userAgent.indexOf(\"UCBrowser/11\") !== -1) {\r\n            return true;\r\n        }\r\n     \r\n        return false;\r\n    }\r\n    \r\n    /**\r\n     * helper method to set userId and sessionId cookie\r\n     */\r\n    public static setCookie(logger: IDiagnosticLogger, name: string, value: string, domain?: string) {\r\n        if (Util.canUseCookies(logger)) {\r\n            let domainAttrib = \"\";\r\n            let secureAttrib = \"\";\r\n\r\n            if (domain) {\r\n                domainAttrib = \";domain=\" + domain;\r\n            }\r\n\r\n            let location = getLocation();\r\n            if (location && location.protocol === \"https:\") {\r\n                secureAttrib = \";secure\";\r\n                if (_uaDisallowsSameSiteNone === null) {\r\n                    _uaDisallowsSameSiteNone = Util.disallowsSameSiteNone((getNavigator()||{} as Navigator).userAgent);\r\n                }\r\n                \r\n                if (!_uaDisallowsSameSiteNone) {\r\n                    value = value + \";SameSite=None\"; // SameSite can only be set on secure pages\r\n                }\r\n            }\r\n\r\n            Util.document.cookie = name + \"=\" + value + domainAttrib + \";path=/\" + secureAttrib;\r\n        }\r\n    }\r\n\r\n    public static stringToBoolOrDefault(str: any, defaultValue = false): boolean {\r\n        if (str === undefined || str === null) {\r\n            return defaultValue;\r\n        }\r\n\r\n        return str.toString().toLowerCase() === \"true\";\r\n    }\r\n\r\n    /**\r\n     * helper method to access userId and sessionId cookie\r\n     */\r\n    public static getCookie(logger: IDiagnosticLogger, name: string) {\r\n        if (!Util.canUseCookies(logger)) {\r\n            return;\r\n        }\r\n\r\n        let value = \"\";\r\n        if (name && name.length) {\r\n            const cookieName = name + \"=\";\r\n            const cookies = Util.document.cookie.split(\";\");\r\n            for (let i = 0; i < cookies.length; i++) {\r\n                let cookie = cookies[i];\r\n                cookie = Util.trim(cookie);\r\n                if (cookie && cookie.indexOf(cookieName) === 0) {\r\n                    value = cookie.substring(cookieName.length, cookies[i].length);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Deletes a cookie by setting it's expiration time in the past.\r\n     * @param name - The name of the cookie to delete.\r\n     */\r\n    public static deleteCookie(logger: IDiagnosticLogger, name: string) {\r\n        if (Util.canUseCookies(logger)) {\r\n            // Setting the expiration date in the past immediately removes the cookie\r\n            Util.document.cookie = name + \"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\r\n     */\r\n    public static trim = CoreUtils.strTrim;\r\n\r\n    /**\r\n     * generate random id string\r\n     */\r\n    public static newId(): string {\r\n        const base64chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\r\n        let result = \"\";\r\n        // tslint:disable-next-line:insecure-random\r\n        let random = Math.random() * 1073741824; // 5 symbols in base64, almost maxint\r\n\r\n        while (random > 0) {\r\n            const char = base64chars.charAt(random % 64);\r\n            result += char;\r\n            random = Math.floor(random / 64);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\r\n     */\r\n    public static random32() {\r\n        return (0x100000000 * Math.random()) | 0;\r\n    }\r\n\r\n    /**\r\n     * generate W3C trace id\r\n     */\r\n    public static generateW3CId() {\r\n        const hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n\r\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n        let oct = \"\", tmp;\r\n        for (let a = 0; a < 4; a++) {\r\n            tmp = Util.random32();\r\n            oct +=\r\n                hexValues[tmp & 0xF] +\r\n                hexValues[tmp >> 4 & 0xF] +\r\n                hexValues[tmp >> 8 & 0xF] +\r\n                hexValues[tmp >> 12 & 0xF] +\r\n                hexValues[tmp >> 16 & 0xF] +\r\n                hexValues[tmp >> 20 & 0xF] +\r\n                hexValues[tmp >> 24 & 0xF] +\r\n                hexValues[tmp >> 28 & 0xF];\r\n        }\r\n\r\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n        const clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\r\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\r\n    }\r\n\r\n    /**\r\n     * Check if an object is of type Array\r\n     */\r\n    public static isArray(obj: any): boolean {\r\n        return Object[strPrototype].toString.call(obj) === \"[object Array]\";\r\n    }\r\n\r\n    /**\r\n     * Check if an object is of type Error\r\n     */\r\n    public static isError(obj: any): boolean {\r\n        return Object[strPrototype].toString.call(obj) === \"[object Error]\";\r\n    }\r\n\r\n    /**\r\n     * Check if an object is of type Date\r\n     */\r\n    public static isDate = CoreUtils.isDate;\r\n\r\n    // Keeping this name for backward compatibility (for now)\r\n    public static toISOStringForIE8 = CoreUtils.toISOString;\r\n\r\n    /**\r\n     * Gets IE version returning the document emulation mode if we are running on IE, or null otherwise\r\n     */\r\n    public static getIEVersion(userAgentStr: string = null): number {\r\n        const myNav = userAgentStr ? userAgentStr.toLowerCase() : (_navigator ? (_navigator.userAgent ||\"\").toLowerCase() : \"\");\r\n        if (myNav.indexOf(\"msie\") !== -1) {\r\n            return parseInt(myNav.split(\"msie\")[1]);\r\n        } else if (myNav.indexOf(\"trident/\")) {\r\n            let tridentVer = parseInt(myNav.split(\"trident/\")[1]);\r\n            if (tridentVer) {\r\n                return tridentVer + 4;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Convert ms to c# time span format\r\n     */\r\n    public static msToTimeSpan(totalms: number): string {\r\n        if (isNaN(totalms) || totalms < 0) {\r\n            totalms = 0;\r\n        }\r\n\r\n        totalms = Math.round(totalms);\r\n\r\n        let ms = \"\" + totalms % 1000;\r\n        let sec = \"\" + Math.floor(totalms / 1000) % 60;\r\n        let min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\r\n        let hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\r\n        const days = Math.floor(totalms / (1000 * 60 * 60 * 24));\r\n\r\n        ms = ms.length === 1 ? \"00\" + ms : ms.length === 2 ? \"0\" + ms : ms;\r\n        sec = sec.length < 2 ? \"0\" + sec : sec;\r\n        min = min.length < 2 ? \"0\" + min : min;\r\n        hour = hour.length < 2 ? \"0\" + hour : hour;\r\n\r\n        return (days > 0 ? days + \".\" : \"\") + hour + \":\" + min + \":\" + sec + \".\" + ms;\r\n    }\r\n\r\n    /**\r\n     * Checks if error has no meaningful data inside. Ususally such errors are received by window.onerror when error\r\n     * happens in a script from other domain (cross origin, CORS).\r\n     */\r\n    public static isCrossOriginError(message: string, url: string, lineNumber: number, columnNumber: number, error: Error): boolean {\r\n        return (message === \"Script error.\" || message === \"Script error\") && !error;\r\n    }\r\n\r\n    /**\r\n     * Returns string representation of an object suitable for diagnostics logging.\r\n     */\r\n    public static dump(object: any): string {\r\n        const objectTypeDump: string = Object[strPrototype].toString.call(object);\r\n        let propertyValueDump: string = \"\";\r\n        if (objectTypeDump === \"[object Error]\") {\r\n            propertyValueDump = \"{ stack: '\" + object.stack + \"', message: '\" + object.message + \"', name: '\" + object.name + \"'\";\r\n        } else if (hasJSON()) {\r\n            propertyValueDump = getJSON().stringify(object);\r\n        }\r\n\r\n        return objectTypeDump + propertyValueDump;\r\n    }\r\n\r\n    /**\r\n     * Returns the name of object if it's an Error. Otherwise, returns empty string.\r\n     */\r\n    public static getExceptionName(object: any): string {\r\n        const objectTypeDump: string = Object[strPrototype].toString.call(object);\r\n        if (objectTypeDump === \"[object Error]\") {\r\n            return object.name;\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    /**\r\n     * Adds an event handler for the specified event to the window\r\n     * @param eventName {string} - The name of the event\r\n     * @param callback {any} - The callback function that needs to be executed for the given event\r\n     * @return {boolean} - true if the handler was successfully added\r\n     */\r\n    public static addEventHandler(eventName: string, callback: any): boolean {\r\n        return EventHelper.Attach(getWindow(), eventName, callback);\r\n    }\r\n\r\n    /**\r\n     * Tells if a browser supports a Beacon API\r\n     */\r\n    public static IsBeaconApiSupported(): boolean {\r\n        return ('sendBeacon' in _navigator && (_navigator as any).sendBeacon);\r\n    }\r\n\r\n    public static getExtension(extensions: IPlugin[], identifier: string) {\r\n        let extension = null;\r\n        let extIx = 0;\r\n\r\n        while (!extension && extIx < extensions.length) {\r\n            if (extensions[extIx] && extensions[extIx].identifier === identifier) {\r\n                extension = extensions[extIx];\r\n            }\r\n            extIx++;\r\n        }\r\n\r\n        return extension;\r\n    }\r\n}\r\n\r\nexport class UrlHelper {\r\n    private static document: any = getDocument()||{};\r\n\r\n    private static _htmlAnchorIdx: number = 0;\r\n    // Use an array of temporary values as it's possible for multiple calls to parseUrl() will be called with different URLs\r\n    // Using a cache size of 5 for now as it current depth usage is at least 2, so adding a minor buffer to handle future updates\r\n    private static _htmlAnchorElement: HTMLAnchorElement[] = [null, null, null, null, null];\r\n\r\n    public static parseUrl(url: string): HTMLAnchorElement {\r\n        let anchorIdx = UrlHelper._htmlAnchorIdx;\r\n        let anchorCache = UrlHelper._htmlAnchorElement;\r\n        let tempAnchor = anchorCache[anchorIdx];\r\n        if (!UrlHelper.document.createElement) {\r\n            // Always create the temp instance if createElement is not available\r\n            tempAnchor = { host: UrlHelper.parseHost(url, true) } as HTMLAnchorElement;\r\n        } else if (!anchorCache[anchorIdx]) {\r\n            // Create and cache the unattached anchor instance \r\n            tempAnchor = anchorCache[anchorIdx] = UrlHelper.document.createElement('a');\r\n        }\r\n\r\n        tempAnchor.href = url;\r\n\r\n        // Move the cache index forward\r\n        anchorIdx++;\r\n        if (anchorIdx >= anchorCache.length) {\r\n            anchorIdx = 0;\r\n        }\r\n\r\n        UrlHelper._htmlAnchorIdx = anchorIdx;\r\n\r\n        return tempAnchor;\r\n    }\r\n\r\n    public static getAbsoluteUrl(url: string): string {\r\n        let result: string;\r\n        const a = UrlHelper.parseUrl(url);\r\n        if (a) {\r\n            result = a.href;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public static getPathName(url: string): string {\r\n        let result: string;\r\n        const a = UrlHelper.parseUrl(url);\r\n        if (a) {\r\n            result = a.pathname;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public static getCompleteUrl(method: string, absoluteUrl: string) {\r\n        if (method) {\r\n            return method.toUpperCase() + \" \" + absoluteUrl;\r\n        } else {\r\n            return absoluteUrl;\r\n        }\r\n    }\r\n\r\n    // Fallback method to grab host from url if document.createElement method is not available\r\n    public static parseHost(url: string, inclPort?: boolean) {\r\n        let fullHost = UrlHelper.parseFullHost(url, inclPort);\r\n        if (fullHost ) {\r\n            const match = fullHost.match(/(www[0-9]?\\.)?(.[^/:]+)(\\:[\\d]+)?/i);\r\n            if (match != null && match.length > 3 && _isString(match[2]) && match[2].length > 0) {\r\n                return match[2] + (match[3] ||\"\");\r\n            }\r\n        }\r\n\r\n        return fullHost;\r\n    }\r\n\r\n    /**\r\n     * Get the full host from the url, optionally including the port\r\n     */\r\n    public static parseFullHost(url: string, inclPort?: boolean) {\r\n        let result = null;\r\n        if (url) {\r\n            const match = url.match(/(\\w*):\\/\\/(.[^/:]+)(\\:[\\d]+)?/i);\r\n            if (match != null && match.length > 2 && _isString(match[2]) && match[2].length > 0) {\r\n                result = match[2] || \"\";\r\n                if (inclPort && match.length > 2) {\r\n                    const protocol = (match[1] || \"\").toLowerCase();\r\n                    let port = match[3] || \"\";\r\n                    // IE includes the standard port so pass it off if it's the same as the protocol\r\n                    if (protocol === \"http\" && port === \":80\") {\r\n                        port = \"\";\r\n                    } else if (protocol === \"https\" && port === \":443\") {\r\n                        port = \"\";\r\n                    }\r\n\r\n                    result += port;\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class CorrelationIdHelper {\r\n    public static correlationIdPrefix = \"cid-v1:\";\r\n\r\n    /**\r\n     * Checks if a request url is not on a excluded domain list and if it is safe to add correlation headers.\r\n     * Headers are always included if the current domain matches the request domain. If they do not match (CORS),\r\n     * they are regex-ed across correlationHeaderDomains and correlationHeaderExcludedDomains to determine if headers are included.\r\n     * Some environments don't give information on currentHost via window.location.host (e.g. Cordova). In these cases, the user must\r\n     * manually supply domains to include correlation headers on. Else, no headers will be included at all.\r\n     */\r\n    public static canIncludeCorrelationHeader(config: ICorrelationConfig, requestUrl: string, currentHost?: string) {\r\n        if (!requestUrl || (config && config.disableCorrelationHeaders)) {\r\n            return false;\r\n        }\r\n\r\n        let requestHost = UrlHelper.parseUrl(requestUrl).host.toLowerCase();\r\n        if (requestHost && (requestHost.indexOf(\":443\") !== -1 || requestHost.indexOf(\":80\") !== -1)) {\r\n            // [Bug #1260] IE can include the port even for http and https URLs so if present \r\n            // try and parse it to remove if it matches the default protocol port\r\n            requestHost = (UrlHelper.parseFullHost(requestUrl, true) || \"\").toLowerCase();\r\n        }\r\n\r\n        if ((!config || !config.enableCorsCorrelation) && requestHost !== currentHost) {\r\n            return false;\r\n        }\r\n\r\n        const includedDomains = config && config.correlationHeaderDomains;\r\n        if (includedDomains) {\r\n            let matchExists: boolean;\r\n            CoreUtils.arrForEach(includedDomains, (domain) => {\r\n                const regex = new RegExp(domain.toLowerCase().replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\r\n                matchExists = matchExists || regex.test(requestHost);\r\n            });\r\n\r\n            if (!matchExists) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        const excludedDomains = config && config.correlationHeaderExcludedDomains;\r\n        if (!excludedDomains || excludedDomains.length === 0) {\r\n            return true;\r\n        }\r\n\r\n        for (let i = 0; i < excludedDomains.length; i++) {\r\n            const regex = new RegExp(excludedDomains[i].toLowerCase().replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\r\n            if (regex.test(requestHost)) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // if we don't know anything about the requestHost, require the user to use included/excludedDomains.\r\n        // Previously we always returned false for a falsy requestHost\r\n        return requestHost && requestHost.length > 0;\r\n    }\r\n\r\n    /**\r\n     * Combines target appId and target role name from response header.\r\n     */\r\n    public static getCorrelationContext(responseHeader: string) {\r\n        if (responseHeader) {\r\n            const correlationId = CorrelationIdHelper.getCorrelationContextValue(responseHeader, RequestHeaders.requestContextTargetKey);\r\n            if (correlationId && correlationId !== CorrelationIdHelper.correlationIdPrefix) {\r\n                return correlationId;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets key from correlation response header\r\n     */\r\n    public static getCorrelationContextValue(responseHeader: string, key: string) {\r\n        if (responseHeader) {\r\n            const keyValues = responseHeader.split(\",\");\r\n            for (let i = 0; i < keyValues.length; ++i) {\r\n                const keyValue = keyValues[i].split(\"=\");\r\n                if (keyValue.length === 2 && keyValue[0] === key) {\r\n                    return keyValue[1];\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport class AjaxHelper {\r\n    public static ParseDependencyPath(logger: IDiagnosticLogger, absoluteUrl: string, method: string, commandName: string) {\r\n        let target, name = commandName, data = commandName;\r\n\r\n        if (absoluteUrl && absoluteUrl.length > 0) {\r\n            const parsedUrl: HTMLAnchorElement = UrlHelper.parseUrl(absoluteUrl)\r\n            target = parsedUrl.host;\r\n            if (!name) {\r\n                if (parsedUrl.pathname != null) {\r\n                    let pathName: string = (parsedUrl.pathname.length === 0) ? \"/\" : parsedUrl.pathname;\r\n                    if (pathName.charAt(0) !== '/') {\r\n                        pathName = \"/\" + pathName;\r\n                    }\r\n                    data = parsedUrl.pathname;\r\n                    name = DataSanitizer.sanitizeString(logger, method ? method + \" \" + pathName : pathName);\r\n                } else {\r\n                    name = DataSanitizer.sanitizeString(logger, absoluteUrl);\r\n                }\r\n            }\r\n        } else {\r\n            target = commandName;\r\n            name = commandName;\r\n        }\r\n\r\n        return {\r\n            target,\r\n            name,\r\n            data\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n * A utility class that helps getting time related parameters\r\n */\r\nexport class DateTimeUtils {\r\n    /**\r\n     * Get the number of milliseconds since 1970/01/01 in local timezone\r\n     */\r\n    public static Now = () => {\r\n        // returns the window or webworker performance object\r\n        let perf = getPerformance();\r\n        if (perf && perf.now && perf.timing) {\r\n            return perf.now() + perf.timing.navigationStart\r\n        }\r\n    \r\n        return new Date().getTime()\r\n    };\r\n\r\n    /**\r\n     * Gets duration between two timestamps\r\n     */\r\n    public static GetDuration = (start: number, end: number): number => {\r\n        let result = null;\r\n        if (start !== 0 && end !== 0 && !CoreUtils.isNullOrUndefined(start) && !CoreUtils.isNullOrUndefined(end)) {\r\n            result = end - start;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n"]}